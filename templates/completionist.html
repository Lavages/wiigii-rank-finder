<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Completionists Club ‚Ä¢ Wiigii's WCA</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;800;900&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background-color: #000000;
      background-image: radial-gradient(circle at 50% -20%, #3b0764 0%, #000000 70%);
    }

    .nav-active {
      color: #ff007f !important;
      border-bottom: 3px solid #ff007f;
      text-shadow: 0 0 10px rgba(255, 0, 127, 0.5);
    }

    .brand-logo {
      font-weight: 900;
      font-size: 2.5rem;
      letter-spacing: -2px;
      background: linear-gradient(to right, #ff007f, #7b2ff7);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .brand-tag {
      background: linear-gradient(135deg, #ff007f, #7b2ff7);
      color: white;
      padding: 2px 10px;
      border-radius: 4px;
      margin-left: 4px;
      -webkit-text-fill-color: white;
      font-size: 1.5rem;
      vertical-align: middle;
    }

    .glass-card {
      background: rgba(15, 15, 15, 0.8);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 0, 127, 0.1);
    }

    /* Custom scrollbar */
    ::-webkit-scrollbar {
      width: 6px;
    }

    ::-webkit-scrollbar-track {
      background: #000;
    }

    ::-webkit-scrollbar-thumb {
      background: linear-gradient(#ff007f, #7b2ff7);
      border-radius: 10px;
    }

    /* Premium Tier Row Styles */
    .platinum-row {
      background: linear-gradient(to right, #0a0a0a, #2d1b24) !important;
      border-left: 4px solid #f472b6 !important;
    }

    .palladium-row {
      background: linear-gradient(to right, #050505, #1e293b) !important;
      border-left: 4px solid #94a3b8 !important;
    }

    .iridium-row {
      background: linear-gradient(135deg, #1f1218 0%, #000000 50%, #2e102e 100%) !important;
      border-left: 4px solid #ff007f !important;
      text-shadow: 0 0 8px rgba(255, 0, 127, 0.3);
    }

    /* Button Toggles */
    .btn-category {
      border: 1px solid rgba(255, 255, 255, 0.05);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .btn-category.active-tier {
      transform: translateY(-2px);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.4);
      border-color: currentColor;
    }

    .pink-border-glow {
      border: 1px solid rgba(255, 0, 127, 0.2);
      box-shadow: inset 0 0 20px rgba(255, 0, 127, 0.05);
    }
  </style>
</head>

<body class="min-h-screen text-gray-100 p-2 sm:p-4 flex flex-col items-center">

  <nav
    class="w-full max-w-5xl mx-auto bg-[#111111]/90 rounded-t-2xl p-3 sm:p-4 flex flex-wrap justify-center items-center gap-2 sm:gap-5 sticky top-0 z-50 border-b border-pink-500/20 backdrop-blur-md">
    <a href="/"
      class="text-xs sm:text-sm text-gray-400 hover:text-[#ff007f] font-black px-2 uppercase tracking-tighter transition-colors">Rank
      Finder</a>
    <a href="/competitors"
      class="text-xs sm:text-sm text-gray-400 hover:text-[#ff007f] font-black px-2 uppercase tracking-tighter transition-colors">Competitors</a>
    <a href="/specialist"
      class="text-xs sm:text-sm text-gray-400 hover:text-[#ff007f] font-black px-2 uppercase tracking-tighter transition-colors">Specialist</a>
    <a href="/completionist"
      class="text-xs sm:text-sm font-black px-2 nav-active uppercase tracking-tighter transition-colors">Completionist</a>
    <a href="/events"
      class="text-xs sm:text-sm text-gray-400 hover:text-[#ff007f] font-black px-2 uppercase tracking-tighter transition-colors">Events</a>
    <a href="/comparison"
      class="text-xs sm:text-sm text-gray-400 hover:text-[#ff007f] font-black px-2 uppercase tracking-tighter transition-colors">Comparison</a>
    <a href="/competitions"
      class="text-xs sm:text-sm text-gray-400 hover:text-[#ff007f] font-black px-2 uppercase tracking-tighter transition-colors">Competitions</a>
  </nav>

  <main
    class="max-w-5xl w-full mx-auto glass-card rounded-b-2xl shadow-[0_20px_50px_rgba(0,0,0,0.5)] p-4 sm:p-10 space-y-10 flex-grow border-x border-b border-pink-500/10">

    <header class="text-center">
      <h1 class="brand-logo mb-2">Completionist<span class="brand-tag">Club</span></h1>
      <p class="text-purple-400/60 text-[10px] font-black uppercase tracking-[0.4em] italic">Recognizing the masters of
        the WCA spectrum</p>
    </header>

    <div class="flex justify-center flex-wrap gap-3 sm:gap-4">
      <button
        class="btn-category bg-amber-900/10 text-amber-600 font-black py-2 px-5 rounded-lg text-xs tracking-widest uppercase active-tier"
        data-category="bronze">Bronze</button>
      <button
        class="btn-category bg-slate-800/20 text-slate-400 font-black py-2 px-5 rounded-lg text-xs tracking-widest uppercase"
        data-category="silver">Silver</button>
      <button
        class="btn-category bg-yellow-500/10 text-yellow-500 font-black py-2 px-5 rounded-lg text-xs tracking-widest uppercase"
        data-category="gold">Gold</button>
      <button
        class="btn-category bg-pink-500/10 text-pink-400 font-black py-2 px-5 rounded-lg text-xs tracking-widest uppercase"
        data-category="platinum">Platinum</button>
      <button
        class="btn-category bg-slate-400/10 text-slate-300 font-black py-2 px-5 rounded-lg text-xs tracking-widest uppercase"
        data-category="palladium">Palladium</button>
      <button
        class="btn-category bg-[#ff007f]/20 text-[#ff007f] font-black py-2 px-5 rounded-lg text-xs tracking-widest uppercase"
        data-category="iridium">Iridium</button>
    </div>

    <div id="criteria-box"
      class="bg-black/40 pink-border-glow rounded-2xl p-8 text-gray-300 text-center transition-all duration-300 min-h-[100px] flex items-center justify-center font-bold">
    </div>

    <div id="table-container"
      class="rounded-2xl border border-white/5 bg-black/20 overflow-hidden min-h-[400px] flex flex-col items-center justify-start shadow-inner">
      <div id="loading-spinner" class="hidden py-24 flex flex-col items-center gap-4">
        <svg class="animate-spin h-12 w-12 text-[#ff007f]" xmlns="http://www.w3.org/2000/svg" fill="none"
          viewBox="0 0 24 24">
          <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
          <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 00-8 8h4z"></path>
        </svg>
        <p class="text-[#ff007f] font-black uppercase tracking-widest text-[10px] animate-pulse">Scanning Registry...
        </p>
      </div>
      <p id="error-message" class="text-red-500 font-black uppercase p-10 hidden"></p>
      <p id="no-data-message" class="text-gray-600 font-black uppercase py-24 hidden tracking-widest text-xs">No Signal
        in this Tier Sector.</p>
    </div>
  </main>

  <footer class="w-full max-w-5xl mx-auto text-center text-gray-600 text-xs sm:text-sm mt-8 pb-8 font-bold">
    <p>¬© 2026 Wiigii's WCA Tools ‚Ä¢ <span class="text-[#ff007f]">Verified Data</span></p>
  </footer>

  <script>
    const API_BASE_URL = '/api';
    let allCompletionistsData = [];
    let currentCategory = 'bronze';

    const tableContainer = document.getElementById('table-container');
    const loadingSpinner = document.getElementById('loading-spinner');
    const errorMessage = document.getElementById('error-message');
    const noDataMessage = document.getElementById('no-data-message');
    const buttons = document.querySelectorAll(".btn-category");
    const criteriaBox = document.getElementById("criteria-box");

    const EVENT_NAMES = {
      "333": "3x3 Cube", "222": "2x2 Cube", "444": "4x4 Cube", "555": "5x5 Cube",
      "666": "6x6 Cube", "777": "7x7 Cube", "333oh": "3x3 OH", "333bf": "3x3 Blindfolded",
      "333fm": "3x3 Fewest Moves", "clock": "Clock", "minx": "Megaminx", "pyram": "Pyraminx",
      "skewb": "Skewb", "sq1": "Square-1", "444bf": "4x4 Blindfolded", "555bf": "5x5 Blindfolded",
      "333mbf": "3x3 Multi-Blind", "WC Podium": "WC Podium"
    };

    const criteriaText = {
      bronze: `<p class="uppercase tracking-widest text-xs"><span class="text-amber-500 font-black">ü•â Bronze Sector:</span> Valid result in <span class="text-white">every official WCA event</span>.</p>`,
      silver: `<p class="uppercase tracking-widest text-xs"><span class="text-slate-400 font-black">ü•à Silver Sector:</span> All Singles + Averages, excluding <span class="text-white">FMC/Blind</span> events.</p>`,
      gold: `<p class="uppercase tracking-widest text-xs"><span class="text-yellow-500 font-black">ü•á Gold Sector:</span> All Singles and <span class="text-white">All official averages</span> (inc. FMC/Blind).</p>`,
      platinum: `<p class="uppercase tracking-widest text-xs"><span class="text-pink-400 font-black">üåå Platinum Sector:</span> Gold Criteria + <span class="text-white">WR Holder</span> or <span class="text-white">WC Podium</span>.</p>`,
      palladium: `<p class="uppercase tracking-widest text-xs"><span class="text-slate-300 font-black">üíé Palladium Sector:</span> Platinum + <span class="text-[#ff007f]">Podium finish</span> in all 17 active events.</p>`,
      iridium: `<p class="uppercase tracking-widest text-xs"><span class="text-[#ff007f] font-black">‚òÑÔ∏è Iridium Zenith:</span> WR + WC Podium + <span class="text-white">1st, 2nd, and 3rd</span> in every official event.</p>`
    };

    function updateCriteria(category) {
      criteriaBox.innerHTML = criteriaText[category];
    }

    async function fetchAllCompletionists() {
      loadingSpinner.classList.remove('hidden');
      errorMessage.classList.add('hidden');
      noDataMessage.classList.add('hidden');

      try {
        const response = await fetch(`${API_BASE_URL}/completionists`);
        if (!response.ok) throw new Error('Data sync failure');
        allCompletionistsData = await response.json();
        renderTable(currentCategory);
      } catch (error) {
        errorMessage.textContent = `SYSTEM ERROR: ${error.message}`;
        errorMessage.classList.remove('hidden');
      } finally {
        loadingSpinner.classList.add('hidden');
      }
    }

    function renderTable(category) {
      currentCategory = category;
      tableContainer.querySelectorAll('.dynamic-content').forEach(el => el.remove());
      noDataMessage.classList.add('hidden');

      let filtered = allCompletionistsData.filter(c => c.category.toLowerCase() === category.toLowerCase());

      if (filtered.length === 0) {
        noDataMessage.classList.remove('hidden');
        return;
      }

      filtered.sort((a, b) => {
        const dateA = a.categoryDate === "N/A" ? "9999-12-31" : a.categoryDate;
        const dateB = b.categoryDate === "N/A" ? "9999-12-31" : b.categoryDate;
        return new Date(dateA) - new Date(dateB);
      });

      const tableHtml = `
        <div class="hidden sm:block w-full dynamic-content overflow-x-auto animate-fade-in">
          <table class="w-full text-left">
            <thead class="bg-white/5 border-b border-white/5">
              <tr>
                <th class="p-5 text-[10px] font-black text-purple-500 uppercase tracking-[0.2em]">Rank</th>
                <th class="p-5 text-[10px] font-black text-purple-500 uppercase tracking-[0.2em]">Name</th>
                <th class="p-5 text-[10px] font-black text-purple-500 uppercase tracking-[0.2em]">WCA ID</th>
                <th class="p-5 text-[10px] font-black text-purple-500 uppercase tracking-[0.2em]">Completion Date</th>
                <th class="p-5 text-[10px] font-black text-purple-500 uppercase tracking-[0.2em]">Final Trigger</th>
              </tr>
            </thead>
            <tbody class="divide-y divide-white/5">
              ${filtered.map((c, i) => {
        let rowClass = "hover:bg-[#ff007f]/5 transition-colors group";
        if (category === 'platinum') rowClass += " platinum-row";
        else if (category === 'palladium') rowClass += " palladium-row";
        else if (category === 'iridium') rowClass += " iridium-row";

        return `
                  <tr class="${rowClass}">
                    <td class="p-5 font-black text-gray-500 text-xs">#${i + 1}</td>
                    <td class="p-5 font-black text-white uppercase tracking-tighter group-hover:text-[#ff007f] transition-colors">${c.name}</td>
                    <td class="p-5">
                      <a href="https://www.worldcubeassociation.org/persons/${c.id}" target="_blank"
                        class="text-[#ff007f] font-black text-xs hover:underline decoration-[#ff007f]/30">${c.id}</a>
                    </td>
                    <td class="p-5 text-xs font-bold text-gray-400">${c.categoryDate || "N/A"}</td>
                    <td class="p-5 text-[10px] font-black uppercase text-[#ff007f]/80 tracking-widest">${EVENT_NAMES[c.lastEvent] || c.lastEvent || "N/A"}</td>
                  </tr>
                `}).join('')}
            </tbody>
          </table>
        </div>
      `;

      const cardsHtml = `
        <div class="sm:hidden flex flex-col gap-4 w-full p-4 dynamic-content">
          ${filtered.map((c, i) => {
        let cardClass = "bg-white/5 border border-white/5";
        if (category === 'platinum') cardClass = "platinum-row";
        else if (category === 'palladium') cardClass = "palladium-row";
        else if (category === 'iridium') cardClass = "iridium-row";

        return `
              <div class="${cardClass} rounded-xl p-6">
                <div class="flex justify-between items-start mb-4">
                  <span class="text-[10px] font-black text-gray-500 uppercase tracking-widest">Rank #${i + 1}</span>
                  <span class="text-[10px] font-black uppercase text-[#ff007f] tracking-widest">${c.category}</span>
                </div>
                <p class="text-xl font-black text-white uppercase tracking-tighter mb-1">${c.name}</p>
                <a href="https://www.worldcubeassociation.org/persons/${c.id}" target="_blank" class="text-[#ff007f] font-black text-[10px] underline">${c.id}</a>
                <div class="mt-6 grid grid-cols-2 gap-4 text-[10px] border-t border-white/5 pt-4">
                  <div>
                    <p class="text-gray-500 uppercase font-black mb-1">Achieved</p>
                    <p class="text-gray-200 font-black">${c.categoryDate || "N/A"}</p>
                  </div>
                  <div>
                    <p class="text-gray-500 uppercase font-black mb-1">Closer</p>
                    <p class="text-[#ff007f] font-black uppercase">${EVENT_NAMES[c.lastEvent] || c.lastEvent || "N/A"}</p>
                  </div>
                </div>
              </div>
            `}).join('')}
        </div>
      `;

      tableContainer.insertAdjacentHTML('beforeend', tableHtml + cardsHtml);
    }

    buttons.forEach(btn => {
      btn.addEventListener("click", () => {
        buttons.forEach(b => b.classList.remove('active-tier'));
        btn.classList.add('active-tier');
        renderTable(btn.dataset.category);
        updateCriteria(btn.dataset.category);
      });
    });

    document.addEventListener('DOMContentLoaded', () => {
      const defaultButton = document.querySelector(`.btn-category[data-category="${currentCategory}"]`);
      if (defaultButton) defaultButton.classList.add('active-tier');
      updateCriteria(currentCategory);
      fetchAllCompletionists();
    });
  </script>
</body>

</html>